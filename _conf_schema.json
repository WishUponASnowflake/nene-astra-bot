{
  "dashscope_config": {
    "description": "阿里云 Dashscope 配置 (API Key 请设置在环境变量 DASHSCOPE_API_KEY 中)",
    "type": "object",
    "items": {
      "model_name": {
        "description": "模型名称",
        "type": "string",
        "default": "multimodal-embedding-v1",
        "hint": "要使用的多模态 Embedding 模型。通常保持默认即可。"
      }
    }
  },
  "at_message_window": {
    "description": "被 @ 后等待后续消息的窗口时间（秒）",
    "type": "int",
    "default": 15,
    "hint": "当用户 @ 机器人时，机器人会等待这么长时间来收集用户的连续消息，然后一起处理。设置为 0 则禁用此功能。"
  },
  "at_message_prompt": {
    "description": "进入等待后续消息状态时对用户的提示",
    "type": "string",
    "default": "我在，请讲。在 {timeout} 秒内我会一并收听您的后续消息...",
    "hint": "这条消息会在用户 @ 机器人时发送，以提示用户可以连续发言。您可以使用 `{timeout}` 作为占位符来显示等待时间。"
  },
  "reply_possibility": {
    "description": "备用触发概率 (0.0 至 1.0)",
    "type": "float",
    "default": 0.1,
    "hint": "仅在未配置“判断模型”时生效。设置一个 0 到 1 之间的小数，代表在非 @ 情况下随机触发回复的概率。"
  },
  "main_llm_provider": {
    "description": "最终回复使用的大语言模型配置",
    "type": "object",
    "items": {
      "provider_id": {
        "description": "服务提供商 ID",
        "type": "string",
        "hint": "请选择一个用于生成最终回复的大语言模型。",
        "_special": "select_provider"
      },
      "persona_prompt": {
        "description": "人格 Prompt (System Prompt)",
        "type": "text",
        "default": "你是一个友好、乐于助人的群聊助手。",
        "hint": "在这里输入你希望大模型扮演的人格或遵循的规则，它将作为 System Prompt 发送给模型。"
      }
    }
  },
  "judgement_model": {
    "description": "用于判断是否主动回复的小模型配置",
    "type": "object",
    "items": {
      "provider_id": {
        "description": "服务提供商 ID",
        "type": "string",
        "hint": "请选择一个轻量、快速的模型用作回复意愿判断。该模型需要根据对话判断回复的必要性，并给出一个0到1之间的概率值。",
        "_special": "select_provider"
      },
      "judgement_prompt": {
        "description": "判断模型的 Prompt",
        "type": "text",
        "default": "你是一个群聊中 AI 助手的回复决策模型。你的任务是判断 AI 助手对以下新消息进行回复的“必要性”和“趣味性”，并给出一个 0.0 到 1.0 之间的概率分数。回复标准：1. 话题轻松有趣、适合闲聊时，概率更高。2. 话题直接与 AI、机器人、模型或代码相关时，概率应该很高（0.8-1.0）。3. 用户在明确寻求帮助、提问时，概率应该为 1.0。4. 如果是严肃、专业或工作相关的话题，概率应该很低。5. 无意义的闲聊或表情符号，概率应该接近 0.0。你的回答必须只有一个数字，例如：0.75。群聊新消息：\"{message_text}\" 根据以上标准，AI 助手回复的概率是？",
        "hint": "这是发送给判断模型的指令。您可以使用 `{message_text}` 作为占位符来插入当前用户消息。"
      }
    }
  },
  "max_local_images": {
    "description": "本地存储图片的数量上限",
    "type": "int",
    "default": 50,
    "hint": "插件会在本地保存近期图片用于搜索结果展示。为防止占用过多硬盘，这里可以设置一个上限，超过该数量将自动删除最旧的图片。"
  },
  "top_k_text_results": {
    "description": "使用 /rag_search 命令时，返回最相关的文本结果的数量。",
    "type": "int",
    "default": 5,
    "hint": "建议设置在 3 到 10 之间。"
  },
  "top_j_image_results": {
    "description": "使用 /rag_search 命令时，返回最相关的图片结果的数量。",
    "type": "int",
    "default": 3,
    "hint": "建议设置在 1 到 5 之间。"
  }
}